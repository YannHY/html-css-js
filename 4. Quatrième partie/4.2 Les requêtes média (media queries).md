---
tags: [HTML, CSS]
author: [Yann Houry]
date: 11-01-2022
---

# Les requÃªtes mÃ©dia (media queries)
ğŸ  [Index](https://github.com/YannHY/html-css-js/blob/main/index.md) > Les requÃªtes mÃ©dia (media queries)

GrÃ¢ce Ã  la propriÃ©tÃ© `max-width` et des unitÃ©s comme les `em` ou les pourcentages, nous avons Ã  prÃ©sent les bases nÃ©cessaires pour que notre site possÃ¨de un affichage qui adaptant Ã  la taille de l'Ã©cran. 

Il nous reste toutefois Ã  intÃ©grer les requÃªtes mÃ©dia afin que notre site soit totalement Â«Â responsive designÂ Â».

## Qu'est-ce qu'une requÃªte mÃ©diaÂ ?
Que ce soit sur une autre feuille de style ou sur la mÃªme, nous allons appliquer un certain style qui dÃ©pende de la taille de l'Ã©cran. Par exemple, imaginons que l'on veuille dÃ©finir un style pour un Ã©cran dont l'affichage ne dÃ©passe pas les 600 pixels, on Ã©criraÂ :

```css
@media (max-width: 600px){

}
```

En procÃ©dant ainsi, le navigateur va procÃ©der Ã  une vÃ©rificationÂ :Â est-ce que la taille d'Ã©cran est infÃ©rieure ou Ã©gale Ã  600 pixelsÂ ? Si la rÃ©ponse est oui, alors le code que l'on va placer entre les crochets va s'appliquer sinon c'est le style que nous avons dÃ©jÃ  dÃ©fini qui va Ãªtre utilisÃ©.

On peut aussi trÃ¨s bien crÃ©er une autre requÃªte mÃ©dia.

```css
@media (max-width: 800px){

}
```

On peut en crÃ©er autant qu'on veut. 

Il faut simplement, sur notre page HTML, insÃ©rer cette baliseÂ :

```HTML
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
```

En faisant cela, notre page va s'adapter aux dimensions de l'Ã©cran (ce qu'on appelle en fait le Â«Â viewportÂ Â»). La largeur (width) sera celle de l'appareil et on n'aura pas besoin de zoomer ou de dÃ©zoomer pour afficher le contenu.

### Un exemple
Prenons un exemple.

Sur notre site consacrÃ©e aux dessins, nous avons dÃ©fini une balise `<main>` qui est en fait notre conteneur et qui a une dimension de 900 pixelsÂ :

``` CSS
main {
width: 900px;
margin: 0 auto;
}
````

Ã‰videmment, si on veut consulter ce site sur un petit tÃ©lÃ©phone, on sera obligÃ© de faire dÃ©filer la page horizontalement comme on a pu le voir dans la partie [[4.1 CrÃ©er une page Â« responsive design Â»]], ce qui n'est jamais idÃ©al.

On peut tout d'abord pour Ã©viter cela (et mÃªme doit bien sÃ»r) utiliser ce que l'on a vu dans le cours prÃ©cÃ©dent, mais on va aussi utiliser les requÃªtes mÃ©dia.

On va, sur notre feuille de style, Ã©crire par exempleÂ :

```css
@media (max-width: 600px){
width: 550px;
}
```

C'est-Ã -dire qu'on dÃ©finit de nouvelles dimensions qui s'appliqueront si la condition (est-ce que la taille maximale est de 600 pixels) s'avÃ¨re vÃ©rifiÃ©e.

## Comment dÃ©terminer le nombre de requÃªte mÃ©diaÂ ?
La question est simpleÂ :Â quand savoir s'il faut ajouter une requÃªte mÃ©diaÂ ? Et combienÂ d'ailleursÂ ? Faut-il aussi crÃ©er autant de requÃªtes mÃ©dia qu'il y a de types d'appareilÂ ? 

Cela risque d'Ãªtre compliquÃ©, tant il existe des machines en tout genreÂ : petit tÃ©lÃ©phone portable, moyen, grand, phablette, tablette de 8, 10 ou 12 pouces, Ã©cran d'ordinateur portable de 12, 13, 14 ou 16 pouces, Ã©cran d'ordinateur de bureau de 18, 20, 27 ou mÃªme 32 pouces, et j'en passe...

On peut quand mÃªme discerner quelques grandes familles d'Ã©cran que cette image trouvÃ©e sur l'article [Lâ€™essentiel du responsive design : la gestion des Ã©crans](https://academy.lotincorp.biz/lessentiel-du-responsive-design-la-gestion-des-ecrans/) rÃ©sume assez bien.

![[responsive-design-mesures.jpg | 600]]

En somme, on va Ã©tablir un certain nombre de requÃªte en fonction de principales tailles d'Ã©cran.

Mais mÃªme en faisant ainsi, cela risque d'Ãªtre compliquÃ©. 

On va alors utiliser les outils de notre navigateur pour procÃ©der Ã  un petit exercice assez simple. 

Ã€ cet effet, convoquez l'inspecteur et cliquez sur Toggle Device Tool Bar.

![[Toggle Device Tool Bar.png |Â 600]]
Cela va nous permettre de voir ce que donne l'affichage de notre site sur diffÃ©rentes tailles d'Ã©cran, et par consÃ©quent de voir quand notre design est Â«Â cassÃ©Â Â» et donc Ã  quel moment, il va nous falloir y remÃ©dier grÃ¢ce aux requÃªtes mÃ©dia.

![[toggle-device-tool-bar.gif |Â 600]]

On voit bien qu'en-dessous de 1200 pixels, notre design n'est plus adaptÃ©.

Il va donc falloir faire plusieurs choses.

Comme nous l'avons vu dans [[4.1 CrÃ©er une page Â« responsive design Â»]], il faut adopter  `max-width`, les unitÃ©s comme l'`em` et le pourcentage. Pour ne pas avoir Ã  faire le calcul [^1], on peut utiliser un site proposant la conversion [comme celui-ci](https://www.w3schools.com/tags/ref_pxtoemconversion.asp).

```CSS
main {
  max-width: 56.2em;
  margin: 0 auto;
}
```

Mais ce sont toutes les unitÃ©s en pixel qu'il va falloir convertir. Cela sera votre premier exerciceÂ :Â convertissez les pixels en em [^2].

Si vous avez terminÃ©, vous aurez  remarquÃ© que notre design n'a pas bouge d'un pouce (si j'ose dire). C'est exactement la mÃªme chose.

Ã€ prÃ©sent, intÃ©grons notre premiÃ¨re requÃªte mÃ©dia, mais tout d'abord, changeons un peu notre style. Nous utilisions la propriÃ©tÃ© `flex` pour centrer nos colonnes. Utilisons plutÃ´t `grid` pour crÃ©er nos trois colones.

```CSS
section {
display: grid;
grid-template-columns: repeat(3, 1fr);
}
```

Ã€ prÃ©sent, insÃ©rons notre requÃªte mÃ©dia, et l'on verra l'utilitÃ© de grid qui, ici, nous permet de dire que l'on veut Ã  prÃ©sent n'avoir que deux colonnes et non plus trois, car nous n'avons plus l'espace.

```css
@media (max-width: 1200px){
section {
grid-template-columns: repeat(2, 1fr);
}
}
```

Et, en effet, nous avons dÃ©sormais deux colonnes.

![[premiere-requete-media.png | 600]]
Malheureusement, on voit que nos images ne sont plus centrÃ©es, mais ce n'est pas un problÃ¨me. Elles sont placÃ©es dans la balise `<article>` Ã  laquelle nous allons appliquer la propriÃ©tÃ© `flex` afin de tout centrer.

```CSS
display: flex;
align-items: center;
flex-direction: column;
```

Vous aurez remarquÃ© `flex-direction: column;` sans quoi tout serait alignÃ© horizontalement, mais revenons Ã  nos colonnes. La troisiÃ¨me se retrouve dÃ©sormais sur la gauche. Or nous pouvons la centrer.

Il nous suffira d'ajouter une classe Ã  notre troisiÃ¨me article (disons `col-3`) et d'Ã©crire:

```CSS
.col-3 {
grid-column: 1/-1;
}
```

Ce qui signifie que notre colonne doit s'Ã©tendre de la premiÃ¨re (1) Ã  la derniÃ¨re (-1). Ã‰videmment, en l'Ã©tat, elle est un peu grosse, et il nous faudra refaire son style.

En attendant, on pourrait imaginer qu'il nous faudra n'avoir plus qu'une seule colonne pour les petits Ã©crans, et il nous suffira d'Ã©crireÂ :

```CSS
@media (max-width: 640px) {
section {
	grid-template-columns: 1fr;
    }
}
```

Occupons-nous Ã©galement du titre qui est dÃ©sormais un peu gros.

```CSS
@media (max-width: 640px) {
  h1 {
    font-size: 3em;
  }

  section {
    grid-template-columns: 1fr;
  }
}
```

Il est temps pour vous de vous exercer. Faites l'[[Exercice 10 | exercice 10]] dans lequel nous finirons d'adapter notre site Ã  tout type d'Ã©cran.

â¡ï¸ L'exercice 10 Ã©tant fait, notre site s'adapte dÃ©sormais Ã  tout type d'appareil que l'on veuille l'afficher sur l'Ã©cran d'un petit tÃ©lÃ©phone ou d'un grand Ã©cran de 27 pouces. Il est temps maintenant de lui donner un [[4.3 IntÃ©grer un mode sombre (CSS uniquement) | mode sombre]].

[^1]: Un em Ã©quivaut Ã  16 pixels (900/16 = 56.2em et 56.2 x 16 = 900px).
[^2]: Cela ne sera toutefois pas nÃ©cessaire pour les trÃ¨s faibles valeurs comme pour `border-radius: 5px;` par exemple.
